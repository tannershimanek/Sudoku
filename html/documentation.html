<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <h1>Documentation <span class="small-and-muted"> - Tanner Shimanek</span></h1>
    <hr>

    <div>
        <h2 class="success">How I Implemented My Sudoku Game and How I Satisfied the Remainder of the Requirements</h2>
        <p></p>

        <h2 class="success">Game Grid Using CSS That is Generated by Javascript</h2>
        <p>I use JavaScript to add CSS in many places around the grid page. A few locations are the 'givens' in the dynamically generated Sudoku puzzle, the timer above the table and to show/hide the 'start game' and 'new game' buttons. I think my favorite location is in the pop up after you solve a puzzle</p>
        <div class="img-row">
            <img class="mr-image" src="../assets/times.png" alt="mouse click input" width="350px">
            <img class="mr-image" src="../assets/completegame.png" alt="mouse click input" width="350px">
        </div>
        
        <h2 class="success">User Input in the Form of Text, Select Options, and Buttons</h2>
        <p>The use is able to input information by text in each input in the game grid. The user can also click buttons to add a new puzzle board to the game. Finally, the user is able to click on an options menu to select their difficulty.</p>
        <img class="mc-image" src="../assets/selectoptions.png" alt="select options" width="300px">

        <h2 class="success">User Input in the Form of Mouse Clicks</h2>
        <p>The user can input data in the form of mouse clicks by clicking on the input boxes in the game grid. They will also be able to click on various buttons around the page to start new games and select difficulties. The player is also able to click on the 'given' numbers to highlight them, helping them find the numbers they need to solve the puzzle.</p>
        <img class="mc-image" src="../assets/mouseclicks.png" alt="mouse click input" width="350px">

        <h2 class="success">Dynamic Modifications of HTML using innnerHTML and DOM Functions</h2>
        <p>The most obvious modifications of HTML using inner HTML is the where I added my Sudoku puzzle. Below, you will see the function I wrote and a screenshot of the table.</p>
        <div class="img-row">
            <pre class="row-el">
        function buildGameGrid(len, width) {
            // build the puzzle table
            let table = document.getElementById("game_grid");
            console.log(table); // remove later
        
            // clear table data
            table.innerHTML = '';
        
            // build the outer shell of the table
            const newTable = document.createElement('table');
            const newTableBody = document.createElement('tbody');
            table.insertAdjacentElement('afterbegin', newTable);
            newTable.insertAdjacentElement('afterbegin', newTableBody);
        
            // create table rows
            for (let row = 0; row < len; row++) {
                const newTableRow = document.createElement('tr');
        
                // create table columns
                for (let col = 0; col < width; col++) {
                    const newTableCol = document.createElement('td');
                    newTableRow.appendChild(newTableCol);
                    newTableCol.appendChild(updateCells(row, col));
                    newTableCol.setAttribute('id', `c${row}${col}`);
        
                    // setAttribute of every 3rd row
                    if (row != 0 && row % 3 == 0) {
                        newTableCol.setAttribute('class', 'border-top');
                    }
                    // setAttribute of every 3rd col
                    if (col != 0 && col % 3 == 0) {
                        newTableCol.setAttribute('class', 'border-left');
                    }
                    // check for corner pieces
                    if  ((col != 0 && col % 3 == 0) && (row != 0 && row % 3 == 0)) {
                        newTableCol.setAttribute('class', 'border-left border-top');
                    }
                }
                newTableBody.appendChild(newTableRow);
            }
        }
            </pre>
            <img class="mr-image" src="../assets/gamegrid.png" alt="mouse click input" width="350px">
        </div>

        <h2 class="success">Use of XMLHttpRequest to Load JSON Game Data That is Displayed on the Grid Page</h2>
        <p></p>

        <h2 class='success'>Incorporates HTML5 Audio tags and Local Storage</h2>
        <p>Audio tag can be found in the 'toast' element or the popup after the player has won. The sound is triggered when the game is completed. I also added some logic for when the player finishes a game, their time is stored in local storage and displayed on the page. I did this becuase I thought that it would be a fun way to compete with yourself.</p>
        <img class="mc-image" src="../assets/local storage.png" alt="mouse click input" width="400px">

        <h2 class="success">Game Logic Code</h2>
        <ul>
            <li class="font-large">Selecting a Difficulty</li>
                <ul>
                    <li>Selecting a difficulty has pretty simple logic. I determine the number of hidden cells by the users selection with the following rules {'easy': 19, 'medium' 28, 'hard': 37 }. What this means is, if the user selects the 'medium' difficulty, the player will have 28 hidden cells.</li>
                </ul>
                <li class="font-large">Start Game/New Game Buttons</li>
                <ul>
                    <li>Both the start game and new game buttons have an event handler that triggers on user click.</li>
                    <li>The start game button updates the models 'gameover' value to false, calls the function that seeds the puzzle and the solution, then it builds the game grid. After those functions are ran, it calls the startTimer() function, uses CSS to hide the start game button and show the new game button. This will also add event listeners to all 'td' table elements to allow the logic in the 'table logic' section later.</li>
                    <li>The New Game Button updates the models 'gameover' value to true, 'grid', and 'solution' values to empty arrays. Then it hides the New Game button and shows the Start game button. After that it stops the timer and saves the time to local storage. However, the time is only saved to local storage if the puzzle is solved. If the user just starts a new game with out completing the puzzle, their time will not be saved.</li>
                </ul>
            <li class="font-large">Build Table Logic</li>
                <ul>
                    <li>I first build an a shuffled array that has 9 indeces and no repeats.</li>
                    <li>After that I build a matrix with that array, using recursion and shifting each row by 3 indeces. However, on the third and seventh rows, I shift the first and third row by one. This allows me to genereate a new table that follows all of the Sudoku rules.</li>
                    <li>I then rotate the whole matix 90 degrees to not make my pattern so easy to see.</li>
                    <li>I then use the selected difficulty to generate the number of hidden cells and randomly place them throughout the board.</li>
                    <li>The buildGameGrid() function accepts length and width parameters. However, when the function is called I pass in 9 for both parameters to ensure the correct size of table is built.</li>
                    <li>buildGameGrid() also dynamically creates all needed table elements using createElement() and appendChild().</li>
                    <li>While table is being created I call another function that modifies the table elements with based off of the grid data saved in the model. If the cell data does not equal zero, it will add the number to the tr element. However, if the cell data does equal zero, it will build a new input element and add it to the table.</li>
                </ul>
            <li class="font-large">Table Logic</li>
                <ul>
                    <li>All tr elements the in the table has the event listener 'click'. This allows the player to click on any 'given' cell to change the color, display its coordinates and value. However, if the clicked element is an input, the color will not change.</li>
                    <li>The input elements have the 'keyup' event listener. This lets me check if the puzzle has been completed once the player adds a value.</li>
                </ul>
            <li class="font-large">Timer Logic</li>
                <ul>
                    <li>The timer has an animation that updates the dom every 100th of a milisecond.</li>
                    <li>The timer is triggered when the 'start game' button is clicked and runs until either the new game button is clicked or the puzzle is completed.</li>
                    <li>After the game has ended by either the new game button or the puzzle being completed, I stop the timer and disply the time on the DOM. I also update the color of the time to bring the users attention to their time.</li>
                </ul>
            <li class="font-large">Puzzle Info and Local Storage</li>
                <ul>
                    <li>I update the local storage once a game has been finished. If the puzzle is completed, I add the time to the prevTime value in local storage.</li>
                    <li>I check if the game is over by using a variable called prevGameComplete in the model. This allows me to change the boolean value if the 'grid' and 'solution' values are the same. This gets checked when the checkIfPlayerWon() function is called.</li>
                    <li>Each tr element has an event listener that listens for user clicks. This allows me to display the cell location and value to the DOM.</li>
                    <li>Using the same event listeners, I update the CSS to change the color of the clicked cell.</li>
                    <li>I also use this to check if the values entered into each cell is correct. Then I later use it to check if the game is complete.</li>
                </ul>
            <li class="font-large">Complete Game Logic</li>
            <ul>
                <li>Each tr element runs the function checkIfPlayerWon(). This function converts the 'grid' and 'solution' values to strings and compares them. If they are the same, I trigger the popup and end game.</li>
                <li>Once the game is complete, I update the time on the DOM from the local storage and then I reset the model values.</li>
            </ul>
        </ul>

        <h2 class="success"><u>EXTRA CREDIT</u>:  Includes a Second HTML5 Component</h2>
        <p>My first HTML component is the sound element in the toast or popup when the game ends. This is triggered by the player completing the table. I also added the players time in Local Storage to allow the user to compare their previous time with their current time. This gives a little more competition to the game.</p>
        <img class="mc-image" src="../assets/audio.png" alt="mouse click input" width="600px">
    </div>

</body>
<footer></footer>
</html>